<html>

<head>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>

    <script src="scripts/parse.js"></script>
    <script src="scripts/golf.js"></script>
    <script src="scripts/jsonToDom.js"></script>
    <script src="scripts/resize.js"></script>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.6.6/dragula.css"
        integrity="sha512-gGkweS4I+MDqo1tLZtHl3Nu3PGY7TU8ldedRnu60fY6etWjQ/twRHRG2J92oDj7GDU2XvX8k6G5mbp0yCoyXCA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        #stage {
            top: 20rem;
        }
    </style>

    <!-- <script>
        $(() => {
            let allS = ["(S (NP Mary))",
                "(S (NP (NP Mary)))",
                "(S (NP (NP (NP Mary))))",
                "(S (NP (NP (NP (NP Mary)))))",
                "(S (NP (NP (NP (NP (NP Mary))))))",
                "(S (NP (NP (NP (NP (NP (NP Mary)))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP Mary))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP Mary)))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary)))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary)))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary))))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary)))))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary))))))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary)))))))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary))))))))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary)))))))))))))))))))",
                "(S (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP (NP Mary))))))))))))))))))))"]
            $("#json").val(JSON.stringify(parse(allS[18])))
            })
    </script> -->


</head>


<body>


    <input type="text" id="json"
        value={"label":"CP","children":[{"label":"NP","children":"who","index":"1"},{"label":"C'","children":[{"label":"C","children":"did"},{"label":"S","children":[{"label":"NP","children":"Lucy"},{"label":"VP","children":[{"label":"V","children":"see"},{"label":"NP","children":"who","trace":"1"}]}]}]}]}>
    <button onclick="jsonToDom(document.getElementById('json').value)">Show Tree</button>

    <!-- <script>
        jsonToDom({"label":"S","children":[{"label":"NP","children":"Mary"},{"label":"VP","children":[{"label":"V","children":"had"},{"label":"NP","children":[{"label":"D","children":"a"},{"label":"N'","children":[{"label":"Adj","children":"little"},{"label":"N","children":"lamb"}]}]}]}]})
    </script> -->

    <div id="stage">

        <svg id="lineContainer" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <marker
                  id="triangle"
                  viewBox="0 0 10 10"
                  refX="1"
                  refY="5"
                  markerUnits="strokeWidth"
                  markerWidth="10"
                  markerHeight="10"
                  orient="auto">
                  <path d="M 0 0 L 10 5 L 0 10 z" fill="#f00" />
                </marker>
            </defs> 
            <!-- def gets deleted along with statically created path -->
            <!-- drawLines() empties lineContainer -->
            <!-- Solution: dynamically create defs -->

            <path d="M 380 601 Q 202 621 125 218" stroke="black" fill="transparent" marker-end="url(#triangle)"></path>
        </svg>
        <div id="problemConstituent" class="block">

        </div>

    </div>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/dragula/3.6.6/dragula.js'></script>

</body>

</html>